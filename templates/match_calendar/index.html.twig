{% extends 'base.html.twig' %}


{% block title %}Calendrier des Matchs 
{% endblock %}

{% block body %}
{# {{ dump(id_team) }} #}

{{ include('main_nav.html.twig', {'idteam': idteam}) }}

<div class="body-wrapper">

    <div class="menu-tab">
        <h4 class="active">
            <a href="">Calendrier des matches</a>
        </h4>
        <!-- <h4><a href="">Compositions</a></h4> -->
    </div>


    <div class="main-wrapper">
        <div class="dashboard">
            <div class="dash-card table-responsive">
                <table id="match-calendar" class="stripe hover cell-border dt-body-center">
                    <thead>
                        <tr>
                            <th data-priority="4">Type</th>
                            <th data-priority="1">Date (A/M/J)</th>
                            <th data-priority="2">Équipe locale</th>
                            <!-- <th></th> -->
                            <th data-priority="3">Équipe visiteur</th>
                            <th data-priority="5">Détail</th>
                        </tr>
                    </thead>
                    <tbody>

                        {% for match in match %}
                        <tr>

                            <td>{{ match.matchtype.name }}</td>
                            <td>{{ match.date |date("Y/m/d") }}</td>
                            <td>{{ match.localteam }}</td>
                            <!-- <td>vs</td> -->
                            <td>{{ match.visitorteam }}</td>
                            <td>
                                <a href="/match/composition/{{ match.id }}"><small><img class="editicon" src="{{asset ('icons/eyes.png') }}"></small></a>
                                <img class="editicon pointer" src="{{asset ('icons/trash.png') }}" data-toggle="modal"
											data-target="#SupprimerMatch-{{match.id}}"></td>
                        </tr>

                        <!-- Modal -->
								<div class="modal fade" id="SupprimerMatch-{{match.id}}" tabindex="-1"
									aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLabel">
													<center>Êtes vous sur de vouloir supprimer?</center>
												</h5>
												<button type="button" class="close" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"
													data-dismiss="modal">Non</button>
												<button type="button" class="btn btn-primary"><a
														href="{{path('del_match', {id_team: idteam, id_match: match.id})}}">Oui</a></button>
											</div>
										</div>
									</div>
								</div>



                        {% endfor %}


                    </tbody>

                    {# <li>{{ match.stats }}</li> #}
                    {# <li>{% for comp in match.composition['backer'] %}
																		                Position possible : {{comp}}<br>
																		                {% endfor %}
																		            </li> #}

                    </tbody>
                </table>
                <a href="" class="add-match-btn btn-lg pointer">+ Ajouter un match</a>

            </div>

            <div class="dashboard-content">
                <div class="dash-card">
                    <div class="card-header">
                        <h5>Résultat des 5 derniers matches</h5>
                    </div>
                    <div class="card-body">
                        <!-- la suite -->
                        <!-- pour guillaume -->
                        <!-- recap 5 dernier match-->
                        {% for resultat in resultat %}
                        {% if resultat == 1 %}
                        <div class="result winner">
                            <p>&#10004;</p>
                        </div>
                        {% endif %}
                        {% if resultat == 2 %}
                        <div class="result loser">
                            <p>&#10006;</p>
                        </div>
                        {% endif %}
                        {% if resultat == 0 %}
                        <div class="result draw">
                            <p>-</p>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div class="dash-card">
                    <div class="card-header">
                        <h5>Les 5 meilleurs buteurs</h5>
                    </div>
                    <div class="card-body">
                        <!-- 5 meilleurs buteurs-->
                        <center>
                            <table id="best-scorers">
                                {% for meilleur_buteur in meilleur_buteur %}
                                <tr>
                                    <td>
                                        <!-- le 2 affiche le nombre de point total de la saison mis par le joueur -->
                                        {# {{ meilleur_buteur.2 }}<br> #}
                                    </td>
                                    <td>
                                        <!-- Le 0 affiche le last name -->
                                        {{ meilleur_buteur.0 }}
                                        <!-- le 1 affiche le first name -->
                                        {{ meilleur_buteur.1 }}
                                    </td>
                                </tr>
                                {% endfor %}
                            </table>
                        </center>
                    </div>
                    <div class="card-footer">
                        <a href="" class="small">Voir le classement des joueurs &xrarr;</a>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>

{% include 'add_match/index.html.twig' with {'form': form} %}


<!-- <script type="text/javascript" src="jquery.dataTables.js"></script> -->
<!-- <script type="text/javascript" src="dataTables.numericComma.js"></script> -->
<script>
    $(document).ready(function () {
        $('#match-calendar').DataTable({
            "language": {
                "url": "{{ asset('js/french.lang') }}"
            },
            "order": [ [ 1, 'desc' ]],
            responsive: true,
            autoWidth: false
        });
        $('.add-match-btn').click(function (e) {
            e.preventDefault()
            $('.modal').fadeIn()
        })
        $('.close-btn').click(function (e) {
            e.preventDefault()
            $('.modal').fadeOut()
        })
    });
</script>
{% endblock %}