{% extends 'base.html.twig' %}

{% block title %}Compositons
{% endblock %}

{% block stylesheets %}
<link href="{{ asset('css/match_composition.css') }}" rel="stylesheet" />
{% endblock %}

{% block body %}
{% include 'main_nav.html.twig' %}

<div class="menu-tab">
    <center>
        <h4>Compositons : </h4>
        <a href="{{path('match_composition', {id_match: id_match, id_composition: 0})}}"><h4 {{ (idcomposition == 0) ? 'class="active"' : 'class=""' }}>1</h4></a>
        <a href="{{path('match_composition', {id_match: id_match, id_composition: 1})}}"><h4 {{ (idcomposition == 1) ? 'class="active"' : 'class=""' }}>2</h4></a>
        <a href="{{path('match_composition', {id_match: id_match, id_composition: 2})}}"><h4 {{ (idcomposition == 2) ? 'class="active"' : 'class=""' }}>3</h4></a>
    </center>
</div>

<div class="main-wrapper">

    <div class="container">

        <input type='hidden' id="idcomposition" value='{{ idcomposition }}' />
        <input type='hidden' id="composition" value='{{ composition }}' />

        <div class="example-wrapper global" data-id-match="{{ id_match }}">

            <div style="display: flex; flex-direction: row; align-items: start; justify-content: center;">
                <div
                    style="display: flex; flex-direction: column; align-items: start; justify-content: space-between; background-size: cover; background-image: url('{{ asset('img/field.png') }}'); width: 602px; height: 851px">
                    <div
                        style="display: flex; flex-direction: column; align-items: center; justify-content: space-between; width: 602px; height: 740px;  margin-top: 30px;">
                        <div class="field-row" style="width: 602px;">
                            <div class="droppable field-position" data-id-position="1">
                                <p class="field-number">1</p>
                            </div>
                            <div class="droppable field-position" data-id-position="2">
                                <p class="field-number">2</p>
                            </div>
                            <div class="droppable field-position" data-id-position="3">
                                <p class="field-number">3</p>
                            </div>
                        </div>
                        <div class="field-row" style="width: 50%;">
                            <div class="droppable field-position" data-id-position="4">
                                <p class="field-number">4</p>
                            </div>
                            <div class="droppable field-position" data-id-position="5">
                                <p class="field-number">5</p>
                            </div>
                        </div>
                        <div class="field-row" style="width: 500px; justify-content: space-between;">
                            <div class="droppable field-position" data-id-position="6">
                                <p class="field-number">6</p>
                            </div>
                            <div class="droppable field-position" data-id-position="8">
                                <p class="field-number">8</p>
                            </div>
                            <div class="droppable field-position" data-id-position="7">
                                <p class="field-number">7</p>
                            </div>
                        </div>
                        <div class="field-row" style="width: 50%;">
                            <div class="droppable field-position" data-id-position="9">
                                <p class="field-number">9</p>
                            </div>
                            <div class="droppable field-position" data-id-position="10">
                                <p class="field-number">10</p>
                            </div>
                        </div>
                        <div class="field-row" style="width: 602px;">
                            <div class="droppable field-position" data-id-position="11">
                                <p class="field-number">11</p>
                            </div>
                            <div class="droppable field-position" data-id-position="12">
                                <p class="field-number">12</p>
                            </div>
                            <div class="droppable field-position" data-id-position="13">
                                <p class="field-number">13</p>
                            </div>
                            <div class="droppable field-position" data-id-position="14">
                                <p class="field-number">14</p>
                            </div>
                        </div>
                        <div class="field-row" style="width: 602px;">
                            <div class="droppable field-position" data-id-position="15">
                                <p class="field-number">15</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="list">

                    <div>
                        <h3>Banc</h3>
                        <div data-id-position="0" id="banc" class="droppable">
                        </div>
                    </div>

                    <div>
                        <h3>SÃ©lection</h3>
                        <div data-id-position="0" id="selected" class="droppable">
                        </div>
                    </div>

                    <div>
                        <h3>Equipe</h3>
                        <div data-id-position="0" id="players_list" class="droppable">
                            {% for player in players %}
                            {% include 'match_composition/playercard.html.twig' with {'id': player.id, 'lastname': player.firstname, 'firstname': player.lestname} %}
                            {% include 'match_composition/playerstats.html.twig' with { 'id': player.id, 
                                                                                        'essais': player.totalessais, 
                                                                                        'transformations': player.totaltransformations,
                                                                                        'penalites': player.totalpenalites,
                                                                                        'drops': player.totaldrops,
                                                                                        'rouges': player.totalrouges,
                                                                                        'jaunes': player.totaljaunes,
                                                                                        'temps': player.totaltemps
                                                                                    } %}
                            {% endfor %}
                        </div>
                    </div>

            </div>

        </div>

    </div>

</div>

{% endblock %}

{% block javascripts %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
<script type="text/javascript" src="{{ asset('js/composition.js') }}"></script>

<script>
    $(function () {
        $('.player_card').mouseenter(
            function () {
                idPlayer = $(this).data("idPlayer");
                $(document).on('mousemove', function (e) {
                    $('.stats-modal-hidden').css('top', e.pageY + 5);
                    $('.stats-modal-hidden').css('left', e.pageX + 5);
                });
                $('.player' + idPlayer + '-stats-modal').fadeIn()
            });
        $('.player_card').mouseleave(
            function () {
                $('.player' + idPlayer + '-stats-modal').fadeOut();
            })
    });
</script>
{% endblock %}